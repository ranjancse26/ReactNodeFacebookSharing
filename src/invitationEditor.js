import React, { PropTypes } from 'react';

var InvitationEditorTextAreaStyle = {
    height: "250px",
    width: "500px"
}

var InvitationEditorPreviewTextStyle = {
    opacity : "0"
}

class InvitationEditor extends React.Component {
    
    static propTypes = {
      value: PropTypes.string
    }

    static defaultProps = {
       value: ""
    }

    constructor (props) {
    super(props)
      this.convertText = this.convertText.bind(this);
      this.copyText = this.copyText.bind(this);
    }

    componentDidMount() {
        this.convertText();
    }

    convertText(){
        var fonts = [
        [['ðš', 'ð›', 'ðœ', 'ð', 'ðž', 'ðŸ', 'ð ', 'ð¡', 'ð¢', 'ð£', 'ð¤', 'ð¥', 'ð¦', 'ð§', 'ð¨', 'ð©', 'ðª', 'ð«', 'ð¬', 'ð­', 'ð®', 'ð¯', 'ð°', 'ð±', 'ð²', 'ð³'], ['ð€', 'ð', 'ð‚', 'ðƒ', 'ð„', 'ð…', 'ð†', 'ð‡', 'ðˆ', 'ð‰', 'ðŠ', 'ð‹', 'ðŒ', 'ð', 'ðŽ', 'ð', 'ð', 'ð‘', 'ð’', 'ð“', 'ð”', 'ð•', 'ð–', 'ð—', 'ð˜', 'ð™'], ['ðŸŽ', 'ðŸ', 'ðŸ', 'ðŸ‘', 'ðŸ’', 'ðŸ“', 'ðŸ”', 'ðŸ•', 'ðŸ–', 'ðŸ—']],
        [['ð‘Ž', 'ð‘', 'ð‘', 'ð‘‘', 'ð‘’', 'ð‘“', 'ð‘”', 'â„Ž', 'ð‘–', 'ð‘—', 'ð‘˜', 'ð‘™', 'ð‘š', 'ð‘›', 'ð‘œ', 'ð‘', 'ð‘ž', 'ð‘Ÿ', 'ð‘ ', 'ð‘¡', 'ð‘¢', 'ð‘£', 'ð‘¤', 'ð‘¥', 'ð‘¦', 'ð‘§'], ['ð´', 'ðµ', 'ð¶', 'ð·', 'ð¸', 'ð¹', 'ðº', 'ð»', 'ð¼', 'ð½', 'ð¾', 'ð¿', 'ð‘€', 'ð‘', 'ð‘‚', 'ð‘ƒ', 'ð‘„', 'ð‘…', 'ð‘†', 'ð‘‡', 'ð‘ˆ', 'ð‘‰', 'ð‘Š', 'ð‘‹', 'ð‘Œ', 'ð‘'], ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']],
        [['ð’‚', 'ð’ƒ', 'ð’„', 'ð’…', 'ð’†', 'ð’‡', 'ð’ˆ', 'ð’‰', 'ð’Š', 'ð’‹', 'ð’Œ', 'ð’', 'ð’Ž', 'ð’', 'ð’', 'ð’‘', 'ð’’', 'ð’“', 'ð’”', 'ð’•', 'ð’–', 'ð’—', 'ð’˜', 'ð’™', 'ð’š', 'ð’›'], ['ð‘¨', 'ð‘©', 'ð‘ª', 'ð‘«', 'ð‘¬', 'ð‘­', 'ð‘®', 'ð‘¯', 'ð‘°', 'ð‘±', 'ð‘²', 'ð‘³', 'ð‘´', 'ð‘µ', 'ð‘¶', 'ð‘·', 'ð‘¸', 'ð‘¹', 'ð‘º', 'ð‘»', 'ð‘¼', 'ð‘½', 'ð‘¾', 'ð‘¿', 'ð’€', 'ð’'], ['ðŸŽ', 'ðŸ', 'ðŸ', 'ðŸ‘', 'ðŸ’', 'ðŸ“', 'ðŸ”', 'ðŸ•', 'ðŸ–', 'ðŸ—']],
        [['ð’¶', 'ð’·', 'ð’¸', 'ð’¹', 'â„¯', 'ð’»', 'â„Š', 'ð’½', 'ð’¾', 'ð’¿', 'ð“€', 'ð“', 'ð“‚', 'ð“ƒ', 'â„´', 'ð“…', 'ð“†', 'ð“‡', 'ð“ˆ', 'ð“‰', 'ð“Š', 'ð“‹', 'ð“Œ', 'ð“', 'ð“Ž', 'ð“'], ['ð’œ', 'â„¬', 'ð’ž', 'ð’Ÿ', 'â„°', 'â„±', 'ð’¢', 'â„‹', 'â„', 'ð’¥', 'ð’¦', 'â„’', 'â„³', 'ð’©', 'ð’ª', 'ð’«', 'ð’¬', 'â„›', 'ð’®', 'ð’¯', 'ð’°', 'ð’±', 'ð’²', 'ð’³', 'ð’´', 'ð’µ'], ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']],
        [['ð“ª', 'ð“«', 'ð“¬', 'ð“­', 'ð“®', 'ð“¯', 'ð“°', 'ð“±', 'ð“²', 'ð“³', 'ð“´', 'ð“µ', 'ð“¶', 'ð“·', 'ð“¸', 'ð“¹', 'ð“º', 'ð“»', 'ð“¼', 'ð“½', 'ð“¾', 'ð“¿', 'ð”€', 'ð”', 'ð”‚', 'ð”ƒ'], ['ð“', 'ð“‘', 'ð“’', 'ð““', 'ð“”', 'ð“•', 'ð“–', 'ð“—', 'ð“˜', 'ð“™', 'ð“š', 'ð“›', 'ð“œ', 'ð“', 'ð“ž', 'ð“Ÿ', 'ð“ ', 'ð“¡', 'ð“¢', 'ð“£', 'ð“¤', 'ð“¥', 'ð“¦', 'ð“§', 'ð“¨', 'ð“©'], ['ðŸŽ', 'ðŸ', 'ðŸ', 'ðŸ‘', 'ðŸ’', 'ðŸ“', 'ðŸ”', 'ðŸ•', 'ðŸ–', 'ðŸ—']],
        [['ð”ž', 'ð”Ÿ', 'ð” ', 'ð”¡', 'ð”¢', 'ð”£', 'ð”¤', 'ð”¥', 'ð”¦', 'ð”§', 'ð”¨', 'ð”©', 'ð”ª', 'ð”«', 'ð”¬', 'ð”­', 'ð”®', 'ð”¯', 'ð”°', 'ð”±', 'ð”²', 'ð”³', 'ð”´', 'ð”µ', 'ð”¶', 'ð”·'], ['ð”„', 'ð”…', 'â„­', 'ð”‡', 'ð”ˆ', 'ð”‰', 'ð”Š', 'â„Œ', 'â„‘', 'ð”', 'ð”Ž', 'ð”', 'ð”', 'ð”‘', 'ð”’', 'ð”“', 'ð””', 'â„œ', 'ð”–', 'ð”—', 'ð”˜', 'ð”™', 'ð”š', 'ð”›', 'ð”œ', 'â„¨'], ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']],
        [['ð•’', 'ð•“', 'ð•”', 'ð••', 'ð•–', 'ð•—', 'ð•˜', 'ð•™', 'ð•š', 'ð•›', 'ð•œ', 'ð•', 'ð•ž', 'ð•Ÿ', 'ð• ', 'ð•¡', 'ð•¢', 'ð•£', 'ð•¤', 'ð•¥', 'ð•¦', 'ð•§', 'ð•¨', 'ð•©', 'ð•ª', 'ð•«'], ['ð”¸', 'ð”¹', 'â„‚', 'ð”»', 'ð”¼', 'ð”½', 'ð”¾', 'â„', 'ð•€', 'ð•', 'ð•‚', 'ð•ƒ', 'ð•„', 'â„•', 'ð•†', 'â„™', 'â„š', 'â„', 'ð•Š', 'ð•‹', 'ð•Œ', 'ð•', 'ð•Ž', 'ð•', 'ð•', 'â„¤'], ['ðŸ˜', 'ðŸ™', 'ðŸš', 'ðŸ›', 'ðŸœ', 'ðŸ', 'ðŸž', 'ðŸŸ', 'ðŸ ', 'ðŸ¡']],
        [['ð–†', 'ð–‡', 'ð–ˆ', 'ð–‰', 'ð–Š', 'ð–‹', 'ð–Œ', 'ð–', 'ð–Ž', 'ð–', 'ð–', 'ð–‘', 'ð–’', 'ð–“', 'ð–”', 'ð–•', 'ð––', 'ð–—', 'ð–˜', 'ð–™', 'ð–š', 'ð–›', 'ð–œ', 'ð–', 'ð–ž', 'ð–Ÿ'], ['ð•¬', 'ð•­', 'ð•®', 'ð•¯', 'ð•°', 'ð•±', 'ð•²', 'ð•³', 'ð•´', 'ð•µ', 'ð•¶', 'ð•·', 'ð•¸', 'ð•¹', 'ð•º', 'ð•»', 'ð•¼', 'ð•½', 'ð•¾', 'ð•¿', 'ð–€', 'ð–', 'ð–‚', 'ð–ƒ', 'ð–„', 'ð–…'], ['ðŸŽ', 'ðŸ', 'ðŸ', 'ðŸ‘', 'ðŸ’', 'ðŸ“', 'ðŸ”', 'ðŸ•', 'ðŸ–', 'ðŸ—']],
        [['ð–º', 'ð–»', 'ð–¼', 'ð–½', 'ð–¾', 'ð–¿', 'ð—€', 'ð—', 'ð—‚', 'ð—ƒ', 'ð—„', 'ð—…', 'ð—†', 'ð—‡', 'ð—ˆ', 'ð—‰', 'ð—Š', 'ð—‹', 'ð—Œ', 'ð—', 'ð—Ž', 'ð—', 'ð—', 'ð—‘', 'ð—’', 'ð—“'], ['ð– ', 'ð–¡', 'ð–¢', 'ð–£', 'ð–¤', 'ð–¥', 'ð–¦', 'ð–§', 'ð–¨', 'ð–©', 'ð–ª', 'ð–«', 'ð–¬', 'ð–­', 'ð–®', 'ð–¯', 'ð–°', 'ð–±', 'ð–²', 'ð–³', 'ð–´', 'ð–µ', 'ð–¶', 'ð–·', 'ð–¸', 'ð–¹'], ['ðŸ¢', 'ðŸ£', 'ðŸ¤', 'ðŸ¥', 'ðŸ¦', 'ðŸ§', 'ðŸ¨', 'ðŸ©', 'ðŸª', 'ðŸ«']],
        [['ð—®', 'ð—¯', 'ð—°', 'ð—±', 'ð—²', 'ð—³', 'ð—´', 'ð—µ', 'ð—¶', 'ð—·', 'ð—¸', 'ð—¹', 'ð—º', 'ð—»', 'ð—¼', 'ð—½', 'ð—¾', 'ð—¿', 'ð˜€', 'ð˜', 'ð˜‚', 'ð˜ƒ', 'ð˜„', 'ð˜…', 'ð˜†', 'ð˜‡'], ['ð—”', 'ð—•', 'ð—–', 'ð——', 'ð—˜', 'ð—™', 'ð—š', 'ð—›', 'ð—œ', 'ð—', 'ð—ž', 'ð—Ÿ', 'ð— ', 'ð—¡', 'ð—¢', 'ð—£', 'ð—¤', 'ð—¥', 'ð—¦', 'ð—§', 'ð—¨', 'ð—©', 'ð—ª', 'ð—«', 'ð—¬', 'ð—­'], ['ðŸ¬', 'ðŸ­', 'ðŸ®', 'ðŸ¯', 'ðŸ°', 'ðŸ±', 'ðŸ²', 'ðŸ³', 'ðŸ´', 'ðŸµ']],
        [['ð˜¢', 'ð˜£', 'ð˜¤', 'ð˜¥', 'ð˜¦', 'ð˜§', 'ð˜¨', 'ð˜©', 'ð˜ª', 'ð˜«', 'ð˜¬', 'ð˜­', 'ð˜®', 'ð˜¯', 'ð˜°', 'ð˜±', 'ð˜²', 'ð˜³', 'ð˜´', 'ð˜µ', 'ð˜¶', 'ð˜·', 'ð˜¸', 'ð˜¹', 'ð˜º', 'ð˜»'], ['ð˜ˆ', 'ð˜‰', 'ð˜Š', 'ð˜‹', 'ð˜Œ', 'ð˜', 'ð˜Ž', 'ð˜', 'ð˜', 'ð˜‘', 'ð˜’', 'ð˜“', 'ð˜”', 'ð˜•', 'ð˜–', 'ð˜—', 'ð˜˜', 'ð˜™', 'ð˜š', 'ð˜›', 'ð˜œ', 'ð˜', 'ð˜ž', 'ð˜Ÿ', 'ð˜ ', 'ð˜¡'], ['ðŸ¢', 'ðŸ£', 'ðŸ¤', 'ðŸ¥', 'ðŸ¦', 'ðŸ§', 'ðŸ¨', 'ðŸ©', 'ðŸª', 'ðŸ«']],
        [['ð™–', 'ð™—', 'ð™˜', 'ð™™', 'ð™š', 'ð™›', 'ð™œ', 'ð™', 'ð™ž', 'ð™Ÿ', 'ð™ ', 'ð™¡', 'ð™¢', 'ð™£', 'ð™¤', 'ð™¥', 'ð™¦', 'ð™§', 'ð™¨', 'ð™©', 'ð™ª', 'ð™«', 'ð™¬', 'ð™­', 'ð™®', 'ð™¯'], ['ð˜¼', 'ð˜½', 'ð˜¾', 'ð˜¿', 'ð™€', 'ð™', 'ð™‚', 'ð™ƒ', 'ð™„', 'ð™…', 'ð™†', 'ð™‡', 'ð™ˆ', 'ð™‰', 'ð™Š', 'ð™‹', 'ð™Œ', 'ð™', 'ð™Ž', 'ð™', 'ð™', 'ð™‘', 'ð™’', 'ð™“', 'ð™”', 'ð™•'], ['ðŸ¬', 'ðŸ­', 'ðŸ®', 'ðŸ¯', 'ðŸ°', 'ðŸ±', 'ðŸ²', 'ðŸ³', 'ðŸ´', 'ðŸµ']],
        [['ðšŠ', 'ðš‹', 'ðšŒ', 'ðš', 'ðšŽ', 'ðš', 'ðš', 'ðš‘', 'ðš’', 'ðš“', 'ðš”', 'ðš•', 'ðš–', 'ðš—', 'ðš˜', 'ðš™', 'ðšš', 'ðš›', 'ðšœ', 'ðš', 'ðšž', 'ðšŸ', 'ðš ', 'ðš¡', 'ðš¢', 'ðš£'], ['ð™°', 'ð™±', 'ð™²', 'ð™³', 'ð™´', 'ð™µ', 'ð™¶', 'ð™·', 'ð™¸', 'ð™¹', 'ð™º', 'ð™»', 'ð™¼', 'ð™½', 'ð™¾', 'ð™¿', 'ðš€', 'ðš', 'ðš‚', 'ðšƒ', 'ðš„', 'ðš…', 'ðš†', 'ðš‡', 'ðšˆ', 'ðš‰'], ['ðŸ¶', 'ðŸ·', 'ðŸ¸', 'ðŸ¹', 'ðŸº', 'ðŸ»', 'ðŸ¼', 'ðŸ½', 'ðŸ¾', 'ðŸ¿']],
        ];

       var originalString = document.getElementById("text").value,
           count = 0,
           selectedFont = document.getElementById("fontDropdown")
           .selectedIndex,
           font = fonts[selectedFont],
           convertedString = "";
       
       originalString = originalString.replace(/\r?\n/g, '\n');   

       for(var c in originalString)
       {
             var code = originalString.charCodeAt(c);

             if(code >= 97 && code <= 122)
                 convertedString = convertedString.concat(font[0][code-97]);
             else if(code >= 65 && code <= 90)
                 convertedString = convertedString.concat(font[1][code-65]);
             else if(code >= 48 && code <= 57)
                convertedString = convertedString.concat(font[2][code-48]);
             else convertedString = convertedString.concat(originalString[c]);
       }
          
       document.getElementById('previewText').innerHTML 
       = this.htmlForTextWithEmbeddedNewlines(convertedString);
    }

    copyText(){
        var previewText = document.getElementById('previewText');
        if(previewText != null){            
          var range = document.createRange();
          var currSelection = window.getSelection();

          range.selectNode(previewText);
          currSelection.addRange(range);
          
          document.execCommand('copy');          
          currSelection.removeAllRanges();
        }
    }

    htmlForTextWithEmbeddedNewlines(text) {
        var htmls = [];
        var lines = text.split(/\n/);
        var tmpDiv = document.createElement('div');
        for (var i = 0 ; i < lines.length ; i++) {
            tmpDiv.innerHTML = lines[i];
            htmls.push(tmpDiv.innerHTML);
        }
        return htmls.join("<br>");
    }

    render()
    {       
        return (<div>      
                <select id="fontDropdown" onChange={this.convertText}>
                  <option value="Bold">Bold</option>
                  <option value="Italic">Italic</option>
                  <option value="BoldItalic">Bold Italic</option>
                  <option value="Script">Script</option>
                  <option value="BoldScript">Script</option>
                  <option value="Fraktur">Fraktur</option>
                  <option value="Double-Struck">Double-Struck</option>
                  <option value="BoldFraktur">Bold Fraktur</option>
                  <option value="Sans-serif">Sans-serif</option>
                  <option value="Sans-serifBold">Sans-serif Bold</option>
                  <option value="Sans-serifItalic">Sans-serif Italic</option>
                  <option value="Sans-serifBoldItalic">Sans-serif Bold Italic</option>
                  <option value="Monospace">Monospace</option>
                </select>
                <br/>
                <h5>Please enter your invite text here:</h5>
                <textarea style={InvitationEditorTextAreaStyle}
                 id="text" 
                 onChange={this.convertText}
                 defaultValue={this.props.value}>
                </textarea>

                <br/>

                <input id="copy-button" type="button" 
                  onClick={this.copyText} 
                  className="submit-btn" value="Copy Message"/>
           
                <div id="previewText" ref='previewText'
                style={InvitationEditorPreviewTextStyle}></div>

                <div id='message'></div>
        </div>);
    }
}

export default InvitationEditor;
